const darkdream_roman_clock_html = `
<div>
<div class="reference"></div>
<div class="clock" id="utility-clock">
    <div class="centre">
        <div class="dynamic">
            <div class="anchor" style="transform: rotate(6deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(12deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(18deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(24deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: -116.9px; left: 67.5px;">05</div>
            <div class="anchor" style="transform: rotate(36deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(42deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(48deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(54deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: -67.5px; left: 116.9px;">10</div>
            <div class="anchor" style="transform: rotate(66deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(72deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(78deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(84deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 0px; left: 135px;">15</div>
            <div class="anchor" style="transform: rotate(96deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(102deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(108deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(114deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 67.5px; left: 116.9px;">20</div>
            <div class="anchor" style="transform: rotate(126deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(132deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(138deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(144deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 116.9px; left: 67.5px;">25</div>
            <div class="anchor" style="transform: rotate(156deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(162deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(168deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(174deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 135px; left: 0px;">30</div>
            <div class="anchor" style="transform: rotate(186deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(192deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(198deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(204deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 116.9px; left: -67.5px;">35</div>
            <div class="anchor" style="transform: rotate(216deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(222deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(228deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(234deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 67.5px; left: -116.9px;">40</div>
            <div class="anchor" style="transform: rotate(246deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(252deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(258deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(264deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: 0px; left: -135px;">45</div>
            <div class="anchor" style="transform: rotate(276deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(282deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(288deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(294deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: -67.5px; left: -116.9px;">50</div>
            <div class="anchor" style="transform: rotate(306deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(312deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(318deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(324deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: -116.9px; left: -67.5px;">55</div>
            <div class="anchor" style="transform: rotate(336deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(342deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(348deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="anchor" style="transform: rotate(354deg);">
                <div class="element minute-line"></div>
            </div>
            <div class="minute-text" style="top: -135px; left: 0px;">60</div>
            <div class="hour-text hour-1" style="top: -90.9px; left: 52.5px;">I</div>
            <div class="hour-text hour-2" style="top: -52.5px; left: 90.9px;">II</div>
            <div class="hour-text hour-3" style="top: 0px; left: 105px;">III</div>
            <div class="hour-text hour-4" style="top: 52.5px; left: 90.9px;">IV</div>
            <div class="hour-text hour-5" style="top: 90.9px; left: 52.5px;">V</div>
            <div class="hour-text hour-6" style="top: 105px; left: 0px;">VI</div>
            <div class="hour-text hour-7" style="top: 90.9px; left: -52.5px;">VII</div>
            <div class="hour-text hour-8" style="top: 52.5px; left: -90.9px;">VIII</div>
            <div class="hour-text hour-9" style="top: 0px; left: -105px;">IX</div>
            <div class="hour-text hour-10" style="top: -52.5px; left: -90.9px;">X</div>
            <div class="hour-text hour-11" style="top: -90.9px; left: -52.5px;">XI</div>
            <div class="hour-text hour-12" style="top: -105px; left: 0px;">XII</div>
        </div>
        <div class="expand round circle-1"></div>
        <div class="anchor hour" style="transform: rotate(565.246deg);">
            <div class="element thin-hand"></div>
            <div class="element fat-hand"></div>
        </div>
        <div class="anchor minute" style="transform: rotate(6782.95deg);">
            <div class="element thin-hand"></div>
            <div class="element fat-hand minute-hand"></div>
        </div>
        <div class="anchor second" style="transform: rotate(406977deg);">
            <div class="element second-hand"></div>
        </div>
        <div class="expand round circle-2"></div>
        <div class="expand round circle-3"></div>
    </div>
</div>
</div>`

        function utilityClock(container) {
            var dynamic = container.querySelector('.dynamic')
            var hourElement = container.querySelector('.hour')
            var minuteElement = container.querySelector('.minute')
            var secondElement = container.querySelector('.second')
            var minute = function(n) {
                return n % 5 == 0 ? minuteText(n) : minuteLine(n)
            }
            var minuteText = function(n) {
                var element = document.createElement('div')
                element.className = 'minute-text'
                element.innerHTML = (n < 10 ? '0' : '') + n
                position(element, n / 60, 135)
                dynamic.appendChild(element)
            }
            var minuteLine = function(n) {
                var anchor = document.createElement('div')
                anchor.className = 'anchor'
                var element = document.createElement('div')
                element.className = 'element minute-line'
                rotate(anchor, n)
                anchor.appendChild(element)
                dynamic.appendChild(anchor)
            }
            var hour = function(n) {
                var element = document.createElement('div')
		var roman_number = ["Zero","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"]
                element.className = 'hour-text hour-' + n
                element.innerHTML = roman_number[n]
                position(element, n / 12, 105)
                dynamic.appendChild(element)
            }
            var position = function(element, phase, r) {
                var theta = phase * 2 * Math.PI
                element.style.top = (-r * Math.cos(theta)).toFixed(1) + 'px'
                element.style.left = (r * Math.sin(theta)).toFixed(1) + 'px'
            }
            var rotate = function(element, second) {
                element.style.transform = element.style.webkitTransform = 'rotate(' + (second * 6) + 'deg)'
            }
            var animate = function() {
                var now = new Date()
                var time = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds() * 1 + now.getMilliseconds() / 1000
                rotate(secondElement, time)
                rotate(minuteElement, time / 60)
                rotate(hourElement, time / 60 / 12)
                requestAnimationFrame(animate)
            }
            for (var i = 1; i <= 60; i++)
                minute(i)
            for (var i = 1; i <= 12; i++)
                hour(i)
            animate()
        }

        function autoResize(element, nativeSize) {
            var update = function() {
                var scale = Math.min(window.innerWidth, window.innerHeight) / nativeSize
                element.style.transform = element.style.webkitTransform = 'scale(' + scale.toFixed(3) + ')'
            }
            update()
            window.addEventListener('resize', update)
        }

function init_darkdream_roman_clock(ElementSelector){
        $(ElementSelector).html("")
        $(ElementSelector).prepend(darkdream_roman_clock_html)
        var clock = document.querySelector('#utility-clock')
        utilityClock(clock)
        if (clock.parentNode.classList.contains('fill'))
            autoResize(clock, 295 + 32)
}