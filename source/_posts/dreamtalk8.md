---
title: 「随心说」都市看客暗梦 の Re. 再度遇见凛寒之冬的随笔
tags:
  - 随心说
categories:
  - 暗梦 の 随心说
abbrlink: c34131c8
excerpt: "暗梦：em...... 在这里主要讲述我为 Twikoo 提交 Pull Request 的经历，以及其他的日常随笔哈，诶嘿~"
date: 2024-01-30 12:53:29
---

### First. 前言
Hi，又是我，你们的都市看客兼吟游诗人，暗梦 · 杜其米亚，em......
> 暗梦：一转眼都到 2024 年了，还是这么冷呢 [梦之无奈] (。-ω-)
无妨，来和旅行者们讲讲最近暗梦我的那些事儿哈，毕竟嘛，也总不能到了新年还当鸽子，忘记更新博客呢，诶嘿~

### I. 重回 Deta 折腾之旅 & 实现 Twikoo 云函数部署的新开端
em...... 暗梦我以前在 [我写的说说](/shuoshuo/ddda5d0e/) 中说道过，[Deta](https://deta.space) 可能会关闭服务
多年不见，再回头望去，发现它又回来了 (・ω< )★ ，那暗梦我一直在想，为 Twikoo 评论系统添加 Deta 云函数部署的功能 *(Tip: 虽然说也有前端和 Twikoo 相似的评论系统，[Detalk](https://detalk.js.org)，不过嘛，和 Twikoo 相比还是没办法通过前端管理评论呢 (￣_,￣ ) )*

> *暗梦：不过想了想如果说是提 Issue 的话嘛，可能作者 [@iMaeGoo](https://www.imaegoo.com) 也没什么时间折腾 & 不了解 Deta，索性就只能由暗梦我自己 Fork 项目，然后在写完代码之后进行测试，最后再来给他提交 Pull Request，说实在的，如果说作者不会 Merge 也没关系，毕竟嘛，Deta 最高运行的也就只是 nodejs16，无法发挥新版 Node.js 才能实现的功能呢 （◞‸◟），至少说能够正常跑起来。*

![Twikoo 云函数在 Deta 的部署结果](/static/20240129_27252.webp)

![Twikoo 调用 Twikoo 云函数 (Deta) の 评论显示效果](/static/20240129_29130.webp)

**不过遇到了一些问题，如果使用 http 框架写复用 Twikoo Vercel 函数的代码的话嘛，部署后在 Deta 访问会报错，无可奈何之下，只能照着 Deta 的文档，用 Express 框架重新写了一个复用 Twikoo Vercel 函数的代码来用于 Deta [梦之无奈] (′▽`〃)。**

如果说要更新云函数的话嘛，按道理来说，修改 /src/server/deta/package.json 文件中，twikoo-vercel 后面的版本号后重新部署即可 *(Tip: 修改环境变量 MONGODB_URI 则无需重新部署，保存后会立即生效)* ，只不过，**它并不支持通过 Github 仓库部署**，只能说是需要作者使用 Space CLI 工具 [[官方文档]](https://deta.space/docs/en/build/reference/cli) 创建项目后通过 `space publish` 命令将其做成 Deta 的 App 发布到 Discovery 让他人部署，然后嘛就是版本更新的情况下再次键入上述命令则更新在 Discovery 中对应的 App，旅行者们可以在登录 Deta 之后点击 Horizon 下面的 Deta Logo 图标，然后在输入框，输入 `update` 按下回车后即可查看是否有更新，暗梦我就不过多阐述了，好吧。

可惜的是，在测试的时候，没办法绑定自己的域名，从前天 (1 月 28 号) 7 点一直到现在，总是显示 Domain Pending Verification，解析的记录都是正确的，在浏览器访问也会显示 `not found` 呢，唉~

![都市看客暗梦 の 在进一步测试的琐事儿](/static/20240129_16169.webp)

其实这个问题也有解决方法，可以在 Cloudflare 上面添加一条 CAA 记录

```yaml
名称: @
标记: 保持默认 (仅允许使用特定主机名)
CA域名: sectigo.com
```

再等上泡一碗方便面的时间，然后在 Deta 的自定义域名那里按下 Reload 后即可显示绿色的 `Domain Verified & Active`
然后就可以通过自定义域名来访问 Twikoo 云函数啦，诶嘿~（*＾-＾*）

到后来，暗梦我提交的 Pull Request 已经被作者 Merge 了，后续就等着作者在官方文档写 Deta 部署文档就告一段落了哈，只不过在这途中还是有一点点小坎坷 (o-ωｑ)).oO ...

![都市看客暗梦 の Pull Request 之路的那些小坎坷](/static/20240130_13587.webp)

{% note "themecolor" "Tip" "fa fa-info" %}
说实在的，有的时候为开源项目做一点微不足道的帮助，也能帮助很多开发者，虽说暗梦我也是第一次给开源项目做贡献嘛 (。-ω-)<br>
只不过，<strong>暗梦我有一个底线，不为任何违反法律法规的开源项目提供任何帮助，只为维护网络安全 & 维护每一片幻想之地 <sup>[个人博客]</sup> 的秩序及静怡。</strong>
{% endnote %}

### II. 都市看客暗梦 の 喵之物语
最近我的猫猫也是怕冷呢，又是 7\~8 度的天气，就在暗梦我在三天前 (1 月 27 号) 晚上休息的时候，猫猫又开始喵喵叫了起来
不过猫猫叫的声音有点不对，第一次听到这种叫声之后，暗梦我还害怕到从床上吓醒了 o(*////▽////*)q ，后来它主动跑到我床上睡着了
也难怪猫猫会冷成这样也不愿意睡猫窝，也挺沧桑呢，就给它做了下驱虫之后就让它继续休息了，好吧。

另外，每当暗梦我在电脑面前写文章的时候，猫猫总是在旁边看我这个月博客有没有拖更呢，诶嘿~

![在电脑面前监督的猫猫，话说，你可不可以不要躺在键盘上呀，拜托~](/static/20240129_11183.webp)

### III. 一枚在 2024 新年选择得过且过的都市看客
要说过节的时候嘛，很多人都喜欢到各种各样的旅游景点游玩，就比方说旅行者 [@小刘同学](https://sweetjing.cc)，他也就喜欢带着小王同学到全国各地开始过年旅行的征途当中 *(暗梦: 本来也只是猜到他会有过年旅行的计划，后来他告诉我没有在过年的计划，看来是暗梦我多虑了呢，好吧 [梦之无奈] (o-ωｑ)).oO)* ，虽说他在年终总结中说道过：*“可能青春就是有这种冲动。但是我们是不后悔的，反而有种~~辛~~幸亏去了的感觉。”*
虽然暗梦我也对他们表示感激，能够珍惜自己年少的青春来做自己想做的事儿，不过，暗梦我嘛，却不为所动，因为暗梦我习惯于在平静 & 和蔼的环境来生活，而且也不怎么喜欢到各个地方去旅游，先不说到外地还需要几百块的高铁车票费用 *(Tip: 或许暗梦我有驾照可以自己开车，但总是不敢开手动挡，进入车流量高峰的城市道路，停车位也不好找)* ，毕竟，吃住玩乐这些，也算是旅游中必不可少的好几笔花销呢 [梦之无奈] φ(-ω-*)，

在过年的时候嘛，除了平平淡淡的得过且过，而暗梦我在新年的一点小期待嘛，就看后续旅行者 [@Vinking](https://vinking.top) 会不会再出 2024 新年解谜的谜题哈，诶嘿~

### Last. 结语
虽然说暗梦我在过年的时候，还是和往常那样得过且过，不过嘛，暗梦我也不算太过于枯燥，至少有亲人 & 在博客友链里旅行者们的陪伴。

{% note "themecolor" "暗梦" "fa fa-comment-o" %}
哦，对了，没几天就是春节了，那提前祝愿旅行者们 2024 年春节快乐哈，再会咯，亲爱的旅行者们 (゜▽゜)☆<br>
{% endnote %}
